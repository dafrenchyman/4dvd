

<div #ClimateSystem id="ClimateSystem" style="width:100%; overflow:hidden; z-index: 2; margin-bottom: 0px;" class="row">
  <mat-sidenav-container #WebglCanvas style="display:block; position:absolute;  overflow:hidden"  id="WebglCanvas">
    <mat-sidenav id="Menu" #sidenav mode="push"  opened="false" style="background-color: white; overflow:auto;" (onmouseover)="inMenu = true;">
      <mat-tab-group>
        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon title='{{datasetTitle}}'>list</mat-icon>
          </ng-template>
          <div class="TabHeading">
            <h5>Dataset Settings</h5>
          </div>
          <mat-list>
            <mat-list-item>
              <button mat-raised-button (click)="OpenDatasetDialog()">Datasets</button>
            </mat-list-item>
          </mat-list>
          <mat-list>
            <mat-divider></mat-divider>
          </mat-list>

          <div class="section" style="margin-left: 20px;">
            <h6>Layers</h6>
            <mat-radio-group class="radio-group">
              <mat-radio-button class="radio-button" *ngFor="let level of GetLevels()" [checked]="level.Selected" [value]="level.Name" (change)="ChangeLevel(level.Level_ID)">
                {{ level.Name }}
              </mat-radio-button>
            </mat-radio-group>
          </div>

        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon title="{{timeTitle}}">event</mat-icon>
          </ng-template>
          <div class="TabHeading">
            <h5>Date</h5>
          </div>

          <div class="section" style="margin-left: 20px;">
            <mat-label>Year</mat-label>
            <mat-list>
              <mat-list-item>
                <mat-slider
                  [(ngModel)]="yearSlider"
                  [max]="GetMaxYear()"
                  [min]="GetMinYear()"
                  [step]="1"
                  [thumbLabel]="true"
                  [tickInterval]="tickInterval"
                  (change)="ChangeYear()">
                </mat-slider>
              </mat-list-item>
              <mat-list-item>
                <mat-form-field>
                  <input matInput [(ngModel)]="yearSlider" (change)="ChangeYear()" type="number">
                </mat-form-field>
              </mat-list-item>
            </mat-list>
          </div>

          <mat-divider></mat-divider>

          <div class="section" style="margin-left: 20px; margin-top: 20px;">
            <mat-label>Month</mat-label>
            <mat-list>
              <mat-list-item>
                <mat-select placeholder="Month" [(ngModel)]="currMonth" (change)="ChangeMonth()">
                  <mat-option *ngFor="let month of months" [value]="month.value">
                    {{ month.viewValue }}
                  </mat-option>
                </mat-select>
              </mat-list-item>
            </mat-list>
          </div>

        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon title="{{graphicTitle}}">brush</mat-icon>
          </ng-template>

            <div class="TabHeading">
              <h5>Graphical Settings</h5>
            </div>

          <mat-list>
            <mat-list-item>
              <button mat-raised-button (click)="OpenColorMapDialog()" title="{{colorMapDesc}}"><mat-icon>palette</mat-icon> ColorMaps</button>
            </mat-list-item>
          </mat-list>
          <mat-list>
            <mat-divider></mat-divider>

            <!-- Smoothed Gridboxes -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{gridboxDesc}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.smoothGrid"
                (change)="changeSmoothGrid()">
                Smoothed Gridboxes
              </mat-slide-toggle>
            </mat-list-item>

            <!-- Pacific Centered -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{pacificDesc}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.pacificCentered"
                (change)="changePacificCentered()">
                Pacific Centered
              </mat-slide-toggle>
            </mat-list-item>

            <!-- Minor Islands -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{islandDesc}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.minorIslands"
                (change)="changeMinorIslandsLines()">
                Minor Islands
              </mat-slide-toggle>
            </mat-list-item>

            <!-- Lat/Lon Lines -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{latLonDesc}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.latlonlines"
                (change)="changeLatlonlines()">
                Lat/Lon Lines
              </mat-slide-toggle>
            </mat-list-item>

            <!-- Geographical Lines -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{geoLineDes}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.geolines"
                (change)="changeGeolines()">
                Geographical Lines
              </mat-slide-toggle>
            </mat-list-item>

            <!-- Time Zones -->
            <mat-list-item>
              <mat-slide-toggle
                class="example-margin"
                title="{{timeZoneDesc}}"
                [color]="'primary'"
                [checked]="viewSettingsSelected.timezones"
                (change)="changeTimezones()">
                Time Zones
              </mat-slide-toggle>
            </mat-list-item>
          </mat-list>

          <mat-divider></mat-divider>

          <!-- Bump Mapping -->
          <div class="section" style="margin-left: 20px;" title="{{bumpDesc}}">
            <h6>Bump Mapping</h6>
            <mat-radio-group class="radio-group" [(ngModel)]="viewSettingsSelected.bumpMapping">
              <mat-radio-button class="radio-button" *ngFor="let curr of viewSettingsOptions.bumpMapping" [value]="curr" (change)="changeBumpMapping(curr)">
                {{curr}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <mat-divider></mat-divider>

          <!-- Globe View -->
          <div class="section" style="margin-left: 20px;" title="{{viewDesc}}">
            <h6>Globe View</h6>
            <mat-radio-group class="radio-group" [(ngModel)]="viewSettingsSelected.view">
              <mat-radio-button class="radio-button" *ngFor="let curr of viewSettingsOptions.view" [value]="curr" (change)="selectView(curr)">
                {{curr}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <mat-divider></mat-divider>

          <!-- Coasts -->
          <div class="section" style="margin-left: 20px;" title="{{coastDesc}}">
            <h6>Coasts</h6>
            <mat-radio-group class="radio-group" [(ngModel)]="viewSettingsSelected.coasts">
              <mat-radio-button class="radio-button" *ngFor="let curr of viewSettingsOptions.coasts" [value]="curr" (change)="selectCoasts(curr)">
                {{curr}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <mat-divider></mat-divider>

          <!-- Rivers -->
          <div class="section" style="margin-left: 20px;" title="{{riverDesc}}">
            <h6>Rivers</h6>
            <mat-radio-group class="radio-group" [(ngModel)]="viewSettingsSelected.rivers">
              <mat-radio-button class="radio-button" *ngFor="let curr of viewSettingsOptions.rivers" [value]="curr" (change)="selectRiver(curr)">
                {{curr}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <mat-divider></mat-divider>

          <!-- Lakes -->
          <div class="section" style="margin-left: 20px;" title="{{lakeDesc}}">
            <h6>Lakes</h6>
            <mat-radio-group class="radio-group" [(ngModel)]="viewSettingsSelected.lakes">
              <mat-radio-button class="radio-button" *ngFor="let curr of viewSettingsOptions.lakes" [value]="curr" (change)="selectLakes(curr)">
                {{curr}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <br>



        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <mat-icon title="{{infoTitle}}">info</mat-icon>
          </ng-template>
          <div class="TabHeading">
            <h5>Information</h5>
          </div>

          <mat-list>
            <mat-list-item>
              <button mat-raised-button (click)="createCsvFromGriddedData()">Download Data</button>
            </mat-list-item>
          </mat-list>

        </mat-tab>
      </mat-tab-group>
    </mat-sidenav>

    <button mat-mini-fab id="sideNavButton" class="example-fab" (click)="sidenav.toggle()">
      <mat-icon>add</mat-icon>
    </button>


    <div id="Legend"></div>

    <div id="ClimateTitle"> {{ GetTitle() }} </div>

    <div id="ClimateDate"> {{ GetLayerDateLabel() }} </div>

    <div id="TimeseriesBox">
      <mat-card *ngIf="GridboxSelected()" >
        <mat-list>
          <mat-list-item>
            Value: {{ this.GridBoxData[0] }}
          </mat-list-item>
          <mat-list-item>
            Lat: {{ this.GridBoxData[1] }}
          </mat-list-item>
          <mat-list-item>
            Lon: {{ this.GridBoxData[2] }}
          </mat-list-item>
          <mat-list-item>
            <button mat-raised-button (click)="OpenTimeseriesDialog()">Timeseries</button>
          </mat-list-item>
        </mat-list>
      </mat-card>
    </div>

    <canvas #ClimateGl id="ClimateGl" (mouseleave)="inCanvas = false;" (mouseenter)='inCanvas = true;' style="position: absolute; z-index: 5; margin-left: 0px; margin-right: 0px; margin-bottom: 0px;"><!-- width="500" height="500" || style="width: 100%; height: 100%" || [attr.width]='_width' [attr.height]='_height'-->

    </canvas>


  </mat-sidenav-container>
</div>

