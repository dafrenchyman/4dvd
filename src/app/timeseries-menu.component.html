<div id="TimeseriesPlot">
  <h2 mat-dialog-title>Time Series</h2>
  <div style="position: absolute; top: 8%; right: 11%">
    <button mat-icon-button (click)="closeTimeSeries()">
      <mat-icon matTooltip="Exit Time Series">close</mat-icon>
    </button>
  </div>
  <mat-dialog-content>
    <ngx-charts-line-chart
      *ngIf="DataAvailable()"
      [view]="view"
      [scheme]="colorScheme"
      [timeline]="timeline"
      [results]="multi"
      [gradient]="gradient"
      [xAxis]="showXAxis"
      [yAxis]="showYAxis"
      [legend]="showLegend"
      [showXAxisLabel]="showXAxisLabel"
      [showYAxisLabel]="showYAxisLabel"
      [xAxisLabel]="xAxisLabel"
      [yAxisLabel]="yValTitle()"
      [autoScale]="autoScale"
    >
      <ng-template #tooltipTemplate let-model="model">
        <div *ngFor="let data of getToolTipData(model | json)">
          <p>
            <u><b>Date:</b> {{ data.date }}</u>
          </p>
          <p>
            <b>{{ yValTitle() }}:</b> {{ data.value }}<br />
            <b>Layer: </b> {{ data.layer }}
          </p>
        </div>
      </ng-template>
      <ng-template #seriesTooltipTemplate let-model="model">
        <p>
          <u><b>Date:</b> {{ chartToolTipDate(model | json) }}</u>
        </p>
        <div *ngFor="let data of getToolTipData(model | json)">
          <p>
            <b>{{ yValTitle() }}:</b> {{ data.value }}<br />
            <b>Layer: </b> {{ data.layer }}
          </p>
        </div>
      </ng-template>
    </ngx-charts-line-chart>
    <br />
    <button mat-raised-button (click)="createCsvFromTimeseriesData()">
      Download Data
    </button>
    <br />
    <p>Latitude: {{ getLat() }}</p>
    <p>Longitude: {{ getLon() }}</p>
  </mat-dialog-content>
  <h2 mat-dialog-title style="text-align: center">
    <u>Pressure Layers</u>
  </h2>
  <mat-dialog-actions>
    <mat-checkbox
      *ngFor="let level of GetLevels()"
      [checked]="IsSelected(level)"
      (click)="ToggleTimeseries(level)"
    >
      {{ level.Name }}
    </mat-checkbox>
  </mat-dialog-actions>
</div>
