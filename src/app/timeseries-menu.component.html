<div id="TimeseriesPlot">
  <div id="print-section">
    <div class="main">
      <div
          #TabMenu
          class="row"
          id="TabMenu"
          style="margin-bottom: 0px; z-index: 10;"
      >
        <div
          id="QuickButtons"
          class="col s12"
          align="left"
          style="float: right; display: inline-block"
        >
          <div class="Menu_button" class="col s1" align="left">
             <button mat-button
              [matMenuTriggerFor]="menu"> <mat-icon>menu</mat-icon></button>
              <mat-menu #menu="matMenu">
                 <button mat-menu-item [useExistingCss]="true" printSectionId="print-section" ngxPrint >Save Graph</button>
                 <button mat-menu-item (click)="createCsvFromTimeseriesData()">Download Data</button>
               </mat-menu>
           </div>
           <div class = "title_text" class="col s8" align="center">
             <h5 class="text-left-right">
               <span class = "title">{{this._model.settings.GenerateTitle(this._model.settings.FullName)}}</span>
               <span class="byline">&nbsp;(Latitude: {{ this._model.settings.GetLatWithDir() }}
                 &nbsp; Longitude: {{ this._model.settings.GetLonWithDir() }})</span>
             </h5>
           </div>
           <div class = "title_text" class="col s12" align="right">
             <button
             mat-icon-button
            (click)="this.closeTimeSeries()"
            class="closeBtn"
            matTooltip="Close Time Series Chart"
             >
              <mat-icon>close</mat-icon>
              </button>
           </div>
         </div>
      </div>
      <mat-dialog-content>
        <ngx-charts-line-chart
          *ngIf="DataAvailable()"
          [view]="view"
          [scheme]="colorScheme"
          [timeline]="timeline"
          [results]="multi"
          [gradient]="gradient"
          [xAxis]="showXAxis"
          [yAxis]="showYAxis"
          [legend]="showLegend"
          [showXAxisLabel]="showXAxisLabel"
          [showYAxisLabel]="showYAxisLabel"
          [xAxisLabel]="xAxisLabel"
          [yAxisLabel]="yValTitle()"
          [autoScale]="autoScale"
        >
          <ng-template #tooltipTemplate let-model="model">
            <div *ngFor="let data of getToolTipData(model | json)">
              <p>
                <u><b>Date:</b> {{ data.date }}</u>
              </p>
              <p>
                <b>{{ yValTitle() }}:</b> {{ data.value }}<br />
                <b>Layer: </b> {{ this._model.settings.levelCheck(data.layer) }}
              </p>
            </div>
          </ng-template>
          <ng-template #seriesTooltipTemplate let-model="model">
            <p>
              <u><b>Date:</b> {{ getTTDate(model | json) }}</u>
            </p>
            <div *ngFor="let data of getSeriesToolTipData(model | json)">
              <p>
                <b>{{ yValTitle() }}:</b> {{ data.value }}<br />
                <b>Layer: </b> {{ this._model.settings.levelCheck(data.layer) }}
              </p>
            </div>
          </ng-template>
        </ngx-charts-line-chart>
        <br />
      </mat-dialog-content>
    </div>
    <mat-dialog-actions>
      <mat-checkbox
        *ngFor="let level of GetLevels(); index as checkboxIndex"
        [checked]="checkboxIndex == 0"
        [disabled]="lonerLevelCheck() === checkboxIndex"
        (change)="ToggleTimeseries(level)"
      >
        {{ this._model.settings.levelCheck(level.Name) }}
      </mat-checkbox>
    </mat-dialog-actions>
  </div>
</div>
